describe('#Comment', function() {
    var category = 'news'
    var objectId = '676260884e164634bb346894cd8203f3'
    var authorId = 'a35ac7efc1df4e68b83d040a96ebc354'
    var commentId = '3106909'
    var thread = 'sub'
    var Comment = napiv3.comment(category)

    describe('.post()', function() {
        it('Response object include keys "_id"', function (done) {
            Comment
                .body({
                    "author": 'sss',
                    "author_id": authorId,
                    "message": 'hello' + Math.random(),
                    "extra": {
                        "images": []
                    }
                })
                .post(thread)
                .done(function (data) {
                    expect(data.data).to.be.an('object')
                    expect(data.data).to.include.keys('_id')
                    done()
                }, function (err) {
                    done(err)
                })
        })
    })
    describe('.list()', function() {
        it('Response array each items include keys "_id","message"', function (done) {
            Comment
                .fetchTotal()
                .list(thread)
                .done(function (data) {
                    expect(data.metadata.total).to.be.an('number')
                    expect(data.data).to.be.an('array')
                    data.data.forEach(function (item) {
                        expect(item).to.include.keys('_id', 'message')
                    })
                    done()
                }, function (err) {
                    done(err)
                })
        })
    })
    describe('.get()', function() {
        it('Response an object include keys "_id","message"', function (done) {
            Comment
                .fetchTotal()
                .list(thread)
                .done(function (data) {
                    var cm = data.data[0]
                    Comment.get(cm._id)
                           .done(function (item) {
                                expect(item.data).to.include.keys('_id', 'message')
                                done()
                           })
                }, function (err) {
                    done(err)
                })
        })
    })
    describe('.reply()', function() {
        it('Response object include keys "_id"', function (done) {
            Comment
                .body({
                    "author": 'bbb',
                    "author_id": 'a35ac7efc1df4e68b83d040a96ebc00',
                    "message": 'say' + Math.random()
                })
                .reply(thread, commentId)
                .done(function (data) {
                    expect(data.data).to.be.an('object')
                    expect(data.data).to.include.keys('_id')
                    done()
                }, function (err) {
                    done(err)
                })
        })
    })
    describe('.like()', function() {
        it('Response an object', function (done) {
            Comment
                .like(thread, commentId)
                .done(function (data) {
                    expect(data.data).to.be.an('object')
                    done()
                }, function (err) {
                    done(err)
                })
        })
    })
})